# 实现FieldDetectionTool时遇到的一些问题

1. java在调用类实例方法时，会传入this指针作为方法的第一个参数，占据局部变量表的第一个slot。特殊的是，在子类构造函数中通过super调用父类构造函数时，父类构造函数中的this静态类型是父类，也就是对域的操作实际都是对父类空间中域的操作，this的实际类型是子类，也就是在使用InvokeVirtual时，会进行delegate，如果子类重载了被调用的方法，那么执行的将是子类的方法。
2. 在子类通过super调用父类的构造函数时，已经InnerClass的构造函数调用时，只有在执行了这些构造函数中的init后才能使用实例域，否则会出现uninitializedThis异常。（可能在执行了父类构造函数中的init后，父类的空间才被分配）。
3. 在子类构造函数中使用super调用父类构造函数构造父类时，父类构造函数中对被子类覆盖的域的修改不会传到子类（子类会开辟新的空间），对子类没有覆盖的域的修改会传到子类（子类访问这些域时实际访问的是父类的空间）。
4. 占用内存过大的问题（byte[]最多翻一倍内存）
5. 多线程问题